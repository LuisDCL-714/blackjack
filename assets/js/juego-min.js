const blackjackModule=(()=>{"use strict";let e=[],l=[],t=document.getElementById("num-players").value,a=document.querySelectorAll("small"),n=document.querySelectorAll(".playing-cards"),r=!1,s=["C","D","H","S"],d=["A","J","Q","K"],i=document.querySelector("#btn-take-playing-card"),o=document.querySelector("#btn-stop-game"),c=document.querySelector("#btn-new-game"),u=document.getElementById("num-players"),p=(t=2)=>{e=b(),l=[],i.disabled=!1,o.disabled=!1,r=!1;for(let s=0;s<t;s++)l.push(0);a.forEach(e=>e.innerText=0),n.forEach(e=>e.innerHTML="");let d=document.getElementById("cpu-players-container");d.innerHTML="";for(let c=1;c<t;c++){let u=document.createElement("div");u.classList.add("box"),u.innerHTML=`<p>CPU ${c} - <small>0</small></p><div class="playing-cards"></div>`,d.appendChild(u)}a=document.querySelectorAll("small"),n=document.querySelectorAll(".playing-cards")},m=e=>{i.disabled=!0,o.disabled=!0,f(e)},f=e=>{for(let t=1;t<l.length;t++){if(l[t]>=19&&.7>=Math.random())continue;let a=0;do{let n=v();a=$(n,t),g(n,t)}while(a<e&&e<=21&&r)}r||l[0]>21?h():(i.disabled=!1,o.disabled=!1)},y=e=>{let l=e.substring(0,e.length-1);return isNaN(l)?"A"===l?11:10:1*l},$=(e,t)=>(l[t]+=y(e),a[t].innerText=l[t],l[t]),g=(e,l)=>{let t=document.createElement("img");t.src=`assets/cartas/${e}.png`,t.alt=`Carta ${e}`,n[l].append(t)},h=()=>{let[e,...t]=l;setTimeout(()=>{e>21?alert("Has perdido :(, \xa1intenta nuevamente!"):Math.max(...t.filter(l=>l<=21&&l>e),0)>0?alert("Has perdido :(, \xa1intenta nuevamente!"):t.some(l=>l===e)?alert("\xa1Ha habido un empate! o.o"):alert("\xa1Felicidades, has ganado :D!")},750)},b=()=>{e=[];for(let l=2;l<=10;l++)for(let t of s)e.push(`${l+t}`);for(let a of s)for(let n of d)e.push(`${n+a}`);return _.shuffle(_.shuffle(_.shuffle(e)))},v=()=>{if(0===e.length)throw"\xa1No hay m\xe1s cartas en el mazo!";return e.pop()};return i.addEventListener("click",()=>{let e=v(),l=$(e,0);g(e,0),m(l)}),o.addEventListener("click",()=>{r=!0,m(l[0])}),c.addEventListener("click",()=>{p(t=document.getElementById("num-players").value)}),u.addEventListener("input",()=>{let e=u.value,l=/^(?:[2-7]|)$/.test(e);u.value=l||""===e?e:""}),{startGame:p}})();