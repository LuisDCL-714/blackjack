const blackjackModule=(()=>{"use strict";let e=[],l=[],t=document.getElementById("num-players").value,a=document.querySelectorAll("small"),n=document.querySelectorAll(".playing-cards"),r=["C","D","H","S"],s=["A","J","Q","K"],d=document.querySelector("#btn-take-playing-card"),i=document.querySelector("#btn-stop-game"),o=document.querySelector("#btn-new-game"),c=document.getElementById("num-players"),u=(t=2)=>{e=h(),l=[],d.disabled=!1,i.disabled=!1;for(let r=0;r<t;r++)l.push(0);a.forEach(e=>e.innerText=0),n.forEach(e=>e.innerHTML="");let s=document.getElementById("cpu-players-container");s.innerHTML="";for(let o=1;o<t;o++){let c=document.createElement("div");c.classList.add("box"),c.innerHTML=`<p>CPU ${o} - <small>0</small></p><div class="playing-cards"></div>`,s.appendChild(c)}a=document.querySelectorAll("small"),n=document.querySelectorAll(".playing-cards")},p=e=>{d.disabled=!0,i.disabled=!0,m(e)},m=e=>{for(let t=1;t<l.length;t++){let a=0;do{let n=v();a=y(n,t),$(n,t)}while(a<e&&e<=21)}g()},f=e=>{let l=e.substring(0,e.length-1);return isNaN(l)?"A"===l?11:10:1*l},y=(e,t)=>(l[t]+=f(e),a[t].innerText=l[t],l[t]),$=(e,l)=>{let t=document.createElement("img");t.src=`assets/cartas/${e}.png`,t.alt=`Carta ${e}`,n[l].append(t)},g=()=>{let[e,...t]=l;setTimeout(()=>{e>21?alert("Has perdido :(, \xa1intenta nuevamente!"):Math.max(...t.filter(l=>l<=21&&l>e),0)>0?alert("Has perdido :(, \xa1intenta nuevamente!"):t.some(l=>l===e)?alert("\xa1Ha habido un empate! o.o"):alert("\xa1Felicidades, has ganado :D!")},750)},h=()=>{e=[];for(let l=2;l<=10;l++)for(let t of r)e.push(`${l+t}`);for(let a of r)for(let n of s)e.push(`${n+a}`);return _.shuffle(_.shuffle(_.shuffle(e)))},v=()=>{if(0===e.length)throw"\xa1No hay m\xe1s cartas en el mazo!";return e.pop()};return d.addEventListener("click",()=>{let e=v(),l=y(e,0);$(e,0),l>21&&p(l)}),i.addEventListener("click",()=>{p(l[0])}),o.addEventListener("click",()=>{u(t=document.getElementById("num-players").value)}),c.addEventListener("input",()=>{let e=c.value,l=/^[2-7]$/.test(e);c.value=l?e:2}),{startGame:u}})();