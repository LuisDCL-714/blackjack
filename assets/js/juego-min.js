const blackjackModule=(()=>{"use strict";let e=[],l=[],t=document.getElementById("num-players").value,a=document.querySelectorAll("small"),n=document.querySelectorAll(".playing-cards"),r=!1,d=["C","D","H","S"],s=["A","J","Q","K"],i=document.querySelector("#btn-take-playing-card"),o=document.querySelector("#btn-stop-game"),c=document.querySelector("#btn-continue-game"),u=document.querySelector("#btn-new-game"),p=document.getElementById("num-players"),$=(t=2)=>{e=v(),l=[],i.disabled=!1,o.disabled=!1,r=!1;for(let d=0;d<t;d++)l.push(0);a.forEach(e=>e.innerText=0),n.forEach(e=>e.innerHTML="");let s=document.getElementById("cpu-players-container");s.innerHTML="";for(let c=1;c<t;c++){let u=document.createElement("div");u.classList.add("box"),u.innerHTML=`<p>CPU ${c} - <small>0</small></p><div class="playing-cards"></div>`,s.appendChild(u)}a=document.querySelectorAll("small"),n=document.querySelectorAll(".playing-cards")},m=e=>{i.disabled=!0,o.disabled=!0,c.disabled=!0,f(e)},f=e=>{for(let t=1;t<l.length;t++){if(l[t]>=21)continue;let a=0;do{let n=E();a=g(n,t),b(n,t)}while(a<e&&e<=21&&r)}r||l[0]>21?h():(i.disabled=!1,o.disabled=!1,c.disabled=!0)},y=e=>{let l=e.substring(0,e.length-1);return isNaN(l)?"A"===l?11:10:1*l},g=(e,t)=>(l[t]+=y(e),a[t].innerText=l[t],l[t]),b=(e,l)=>{let t=document.createElement("img");t.src=`assets/cartas/${e}.png`,t.alt=`Carta ${e}`,n[l].append(t)},h=()=>{let[e,...t]=l;setTimeout(()=>{e>21?alert("Has perdido :(, \xa1intenta nuevamente!"):Math.max(...t.filter(l=>l<=21&&l>e),0)>0?alert("Has perdido :(, \xa1intenta nuevamente!"):t.some(l=>l===e)?alert("\xa1Ha habido un empate! o.o"):alert("\xa1Felicidades, has ganado :D!")},750)},v=()=>{e=[];for(let l=2;l<=10;l++)for(let t of d)e.push(`${l+t}`);for(let a of d)for(let n of s)e.push(`${n+a}`);return _.shuffle(_.shuffle(_.shuffle(e)))},E=()=>{if(0===e.length)throw"\xa1No hay m\xe1s cartas en el mazo!";return e.pop()};return i.addEventListener("click",()=>{let e=E(),l=g(e,0);b(e,0),l>21&&m(l),i.disabled=!0,c.disabled=!1}),c.addEventListener("click",()=>{l[0]>0?m(l[0]):alert("Debes agarrar una carta o detener el juego.")}),o.addEventListener("click",()=>{r=!0,m(l[0])}),u.addEventListener("click",()=>{$(t=document.getElementById("num-players").value)}),p.addEventListener("input",()=>{let e=p.value,l=/^(?:[2-7]|)$/.test(e);p.value=l||""===e?e:""}),{startGame:$}})();